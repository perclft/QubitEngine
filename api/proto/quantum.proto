syntax = "proto3";

package qubit_engine;

option go_package = "./pkg/api;api";

service QuantumCompute {
  rpc RunCircuit (CircuitRequest) returns (StateResponse) {}
  // Streaming RPC
  rpc StreamGates (stream GateOperation) returns (stream Measurement) {}
}

message CircuitRequest {
  int32 num_qubits = 1;
  repeated GateOperation operations = 2;
}

message GateOperation {
  enum GateType {
    HADAMARD = 0;
    PAULI_X = 1;
    CNOT = 2;
  }
  GateType type = 1;
  uint32 target_qubit = 2;
  uint32 control_qubit = 3; 
}

message StateResponse {
  message ComplexNumber {
    double real = 1;
    double imag = 2;
  }
  repeated ComplexNumber state_vector = 1;
}

// FIX: Defined the Missing Message
message Measurement {
  uint32 qubit_index = 1;
  bool result = 2;        // true = 1, false = 0
  double probability = 3; // The probability of this outcome
}
