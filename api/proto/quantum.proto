syntax = "proto3";

package qubit_engine;

// The Service Definition
service QuantumCompute {
  // Unary RPC: Send a circuit, get the final state
  rpc RunCircuit (CircuitRequest) returns (StateResponse) {}
  
  // Streaming RPC: Stream gates in real-time, get updates (Advanced)
  rpc StreamGates (stream GateOperation) returns (stream Measurement) {}
}

// Data Structures
message CircuitRequest {
  int32 num_qubits = 1;
  repeated GateOperation operations = 2;
}

message GateOperation {
  enum GateType {
    HADAMARD = 0;
    PAULI_X = 1;
    CNOT = 2;
  }
  GateType type = 1;
  uint32 target_qubit = 2;
  uint32 control_qubit = 3; // Optional, used for CNOT
}

message StateResponse {
  // Representing complex numbers as two doubles [real, imag]
  message ComplexNumber {
    double real = 1;
    double imag = 2;
  }
  repeated ComplexNumber state_vector = 1;
  map<string, double> probabilities = 2; // e.g., "001" -> 0.5
}
